<!DOCTYPE html>

<html>
  <head>
    <title>Practical JavaScript</title>
    <style>
      body { 
        background-color: black;
        color: white;
      }
    </style>
  </head>
  <body>
    <button id='display-todos-button'>Display todos</button>
    <script>
      // 6.9) We should initialise the todos variable with objects
      var todos = [
        {todoText: 'Item 1', completed: false},
        {todoText: 'Item 2', completed: false},
        {todoText: 'Item 3', completed: false}
      ];

      // 6.11) The add function should add objects
      function add(initialText) { 
        todos.push({todoText: initialText, completed: false});
        displayTodos();
      }

      // 6.12) The edit function should edit objects
      function edit(position, newTodoText) {
      	todos[position].todoText = newTodoText;
	      displayTodos();
      }

      // 3.4) It should have a function to remove a todo
      function remove(position) {
        todos.splice(position, 1);
        displayTodos();
      }

      // 7) It should have a function to toggle a todo
      function toggle(position) {
        if (todos[position].completed === true) {
          todos[position].completed = false;
        } else {
          todos[position].completed = true;
        }
        displayTodos();
      }

      // 9.6) It should have a way to display todos
      function displayTodos() {
        for (var i = 0; i < todos.length; i++) {
          console.log(todos[i]);
        }
      }

      function toggleAll() {
        var completedTodos = 0; // storing completed todos as an easy way to evaluate whether everything is true

        for (var i = 0; i < todos.length; i++) {
          if (todos[i].completed === true) {
            completedTodos++;
          }
        }
        // if (everything is true)
        if (completedTodos === todos.length) {
        //   then change everything to false    
          for (var i = 0; i < todos.length; i++) {
            todos[i].completed = false;
        }
        // if otherwise
        } else {
        //   then change everything to true
          for (var i = 0; i < todos.length; i++) {
            todos[i].completed = true;
          }
        }

        displayTodos();

        // 11.5) The displayTodos button should run the displayTodos function. 
        var displayTodosButton = document.getElementById('display-todos-button');
        displayTodosButton.addEventListener('click', displayTodos);
      }
    </script>
  </body>
</html>

